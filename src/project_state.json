{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Upgrade CampusEarn into a production-ready, role-based marketplace with structured task workflow, escrow-based INR wallet/payments, activity logging, ads monetization, editable profile/task creation forms bound to the database, and seeded demo users/tasks for end-to-end testing—without resetting the existing database and ensuring persistence after refresh.",
  "architectural_notes": [
    "Do NOT remove or reset the existing database; preserve all existing data during upgrade/migrations.",
    "All monetary values (payments, wallet balances, commissions, ad earnings) must be stored and displayed in Indian Rupees (₹).",
    "Seed/demo data required: pre-filled users with roles and initial wallet balances; auto-insert 10 demo tasks that appear immediately on dashboards.",
    "Wallet is system-controlled only (no manual edits); updates occur via deposit/escrow payout/withdrawal workflows and must persist after refresh.",
    "Escrow logic: deduct task payment at task creation; on completion distribute 90% to Student wallet and 10% to Admin wallet; record transactions.",
    "Strict backend-enforced role permissions: only Student accepts/uploads proof; only TaskPoster/Business creates tasks; only Admin approves/rejects; prevent accepting own task and duplicate acceptance.",
    "Profile and Task Creation forms must be fully editable and bound to the database (instant save + persistence)."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-add-support-for-the-additional-marketplace-role-business-alongside-existing-roles-and-enforce-role-based-permissions-across-backend-and-frontend-student-can-accept-submit-proof-withdraw-taskposter-and-business-can-deposit-and-create-tasks-only-admin-can-approve-reject-proofs-and-approve-withdrawals-providers-can-view-progress-but-cannot-complete-review-their-own-tasks",
      "title": "Add support for the additional marketplace role \"Business\" alongside existing roles, and enforce role-based permissions across backend and frontend: Student can accept/submit proof/withdraw; TaskPoster and Business can deposit and create tasks; only Admin can approve/reject proofs and approve withdrawals; providers can view progress but cannot complete/review their own tasks.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-user-profile-data-model-and-ui-to-remove-student-year-college-references-and-to-match-the-requested-profile-form-fields-full-name-contact-number-email-editable-wallet-read-only-role-read-only-profile-must-be-pre-filled-from-the-database-for-the-current-logged-in-user-and-saved-changes-must-persist-after-refresh",
      "title": "Update the user profile data model and UI to remove student-year/college references and to match the requested Profile Form fields: Full Name, Contact Number, Email (editable), Wallet (read-only), Role (read-only). Profile must be pre-filled from the database for the current logged-in user and saved changes must persist after refresh.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-money-values-across-the-app-are-displayed-and-handled-as-indian-rupees-including-wallet-balances-task-payments-escrow-commissions-deposits-withdrawals-ad-earnings-and-transaction-history",
      "title": "Ensure all money values across the app are displayed and handled as Indian Rupees (₹), including wallet balances, task payments, escrow, commissions, deposits, withdrawals, ad earnings, and transaction history.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-editable-task-creation-form-for-taskposter-and-business-fields-title-short-description-full-description-payment-category-location-proof-required-yes-no-on-create-save-task-to-database-set-status-to-open-and-deduct-the-payment-from-the-provider-wallet-into-escrow-prevent-creation-if-insufficient-balance",
      "title": "Implement the editable Task Creation Form for TaskPoster and Business: fields Title, Short Description, Full Description, Payment (₹), Category, Location, Proof Required (Yes/No). On create, save task to database, set status to Open, and deduct the payment from the provider wallet into escrow; prevent creation if insufficient balance.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-validate-the-full-task-status-workflow-and-anti-abuse-constraints-in-the-backend-and-reflect-them-in-ui-open-in-progress-proof-submitted-under-review-completed-reject-returns-task-to-in-progress-prevent-duplicate-acceptance-accepting-own-task-and-any-provider-editing-of-a-task-once-accepted",
      "title": "Implement/validate the full task status workflow and anti-abuse constraints in the backend and reflect them in UI: Open → In Progress → Proof Submitted → Under Review → Completed; Reject returns task to In Progress. Prevent duplicate acceptance, accepting own task, and any provider editing of a task once accepted.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-upgrade-the-student-facing-task-dashboard-and-task-details-experience-to-match-the-requested-marketplace-layout-and-role-based-actions-dashboard-lists-all-open-tasks-with-card-fields-title-short-description-category-payment-bold-location-posted-by-status-badge-accept-button-for-students-only-clicking-a-card-opens-task-details-task-details-shows-the-specified-top-and-middle-sections-and-role-based-actions-student-accept-upload-admin-approve-reject-provider-view-only",
      "title": "Upgrade the Student-facing Task Dashboard and Task Details experience to match the requested marketplace layout and role-based actions: Dashboard lists all Open tasks with card fields (Title, Short Description, Category, Payment ₹ bold, Location, Posted By, Status Badge, Accept button for Students only); clicking a card opens Task Details; Task Details shows the specified top and middle sections and role-based actions (Student accept/upload; Admin approve/reject; provider view-only).",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-end-to-end-wallet-workflows-with-secure-persistence-provider-deposits-taskposter-business-escrow-deduction-on-task-creation-completion-payout-split-90-to-student-10-to-admin-student-withdrawal-request-with-admin-approval-and-an-immutable-transaction-history-that-shows-date-task-when-applicable-credit-debit-amount-and-status",
      "title": "Implement the end-to-end wallet workflows with secure persistence: provider deposits (TaskPoster/Business), escrow deduction on task creation, completion payout split (90% to Student, 10% to Admin), student withdrawal request with admin approval, and an immutable transaction history that shows Date, Task (when applicable), Credit/Debit, Amount (₹), and Status.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-system-records-a-complete-activity-log-for-all-required-actions-task-created-accepted-proof-uploaded-approved-rejected-wallet-credited-debited-withdrawal-requested-approved-and-provide-an-admin-only-view-that-reads-from-the-backend",
      "title": "Ensure the system records a complete Activity Log for all required actions (Task Created, Accepted, Proof Uploaded, Approved, Rejected, Wallet Credited/Debited, Withdrawal Requested/Approved) and provide an Admin-only view that reads from the backend.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-ads-monetization-ui-placements-and-backend-configuration-show-a-dashboard-banner-a-small-banner-in-task-details-and-an-optional-interstitial-after-task-completion-admin-can-configure-frequency-record-ad-earnings-in-with-a-simple-internal-earnings-model-no-third-party-ad-network-integration",
      "title": "Add Ads monetization UI placements and backend configuration: show a dashboard banner, a small banner in task details, and an optional interstitial after task completion. Admin can configure frequency. Record ad earnings in ₹ with a simple internal earnings model (no third-party ad network integration).",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-editable-forms-profile-task-creation-deposit-withdraw-proof-upload-admin-approve-reject-are-connected-to-backend-mutations-and-update-the-ui-immediately-via-react-query-cache-invalidation-all-changes-must-persist-after-refresh-and-deep-links-must-remain-navigable-on-mobile-via-shared-link",
      "title": "Ensure all editable forms (Profile, Task Creation, Deposit, Withdraw, Proof Upload, Admin Approve/Reject) are connected to backend mutations and update the UI immediately via React Query cache invalidation; all changes must persist after refresh and deep links must remain navigable on mobile via shared link.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-the-requested-ui-design-direction-consistently-across-all-pages-blue-white-theme-clean-marketplace-layout-card-based-task-display-sidebar-navigation-modern-typography-and-mobile-responsive-behavior-ensure-all-user-facing-text-is-in-english",
      "title": "Apply the requested UI design direction consistently across all pages: blue & white theme, clean marketplace layout, card-based task display, sidebar navigation, modern typography, and mobile responsive behavior; ensure all user-facing text is in English.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Implement strict role-based dashboards and permissions for Student, TaskPoster, Business, and Admin",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Structured task workflow: Open → In Progress → Proof Submitted → Under Review → Completed with accept/proof upload/admin approve-reject and anti-abuse rules",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "INR (₹) wallet system with deposit, escrow deduction on task creation, 90/10 payout split on completion, withdrawals with admin approval, and transaction history",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Full activity logging for task and wallet events with admin-visible activity logs",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Editable Profile form (name/contact/email editable; wallet/role read-only) persisted to database for current user",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Editable Task Creation form for TaskPoster/Business with all fields editable, saved to DB, instantly visible on student dashboard, and escrow deduction",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Auto-generate 10 demo tasks in the Tasks table (Open, INR payments, required fields populated, accepted/proof null) for immediate dashboard visibility",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Pre-fill demo users and initial INR wallet balances for testing (Rahul, Sneha, Priya, Karan, Aman, Admin)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Ads monetization: dashboard banner, task details banner, optional interstitial after completion, admin-controlled frequency, earnings tracked in ₹",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Security & persistence requirements: do not remove/reset existing DB, keep data, enforce role checks, prevent duplicate/own-task acceptance and post-accept edits, persist all changes after refresh",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Preserve all existing backend stable state and data across this upgrade (users, tasks, wallets, escrow, withdrawals, transactions, activity logs). Do not clear, reinitialize, or remove the existing database/state during deployment or upgrade.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Implement deterministic demo seeding that (a) creates the 6 requested demo user profiles and initial wallet balances, and (b) creates the 10 requested demo tasks with all required fields, without deleting existing data. Seeding must be idempotent (safe to run multiple times) and must ensure seeded tasks appear immediately on the Student dashboard (Status = Open).",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "CampusEarn",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}